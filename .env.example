# StarFire 服务端环境变量配置示例

# =================================
# 服务器基础配置
# =================================
# 服务器端口
SERVER_PORT=:8080

# 连接保活时间（秒）
KEEPALIVE_TIME=30

# 最大延迟时间（秒）
MAX_LATENCY=5

# 聊天最大时间（秒）
CHAT_MAX_TIME=300

# WebSocket缓冲区大小（字节）
WS_BUFFER=1048576

# =================================
# JWT 配置
# =================================
# JWT 密钥（建议使用强密码）
JWT_SECRET=your_jwt_secret_key_here_32_chars_min

# JWT 过期时间（小时）
JWT_EXPIRY=24

# =================================
# API Key 配置
# =================================
# 每个用户最大API Key数量
MAX_API_KEYS_PER_USER=3

# 默认API Key过期时间（天）
DEFAULT_KEY_EXPIRY=30

# =================================
# 负载均衡配置
# =================================
# 负载均衡算法：round-robin, least-connections, random
LBA=round-robin

# =================================
# 邮件服务配置（可选）
# =================================
# 邮件服务器地址
EMAIL_HOST=smtp.gmail.com

# 邮件服务器端口
EMAIL_PORT=587

# 邮件用户名
EMAIL_USER=your-email@gmail.com

# 邮件密码
EMAIL_PASSWORD=your-app-password

# 发件人地址
EMAIL_FROM=your-email@gmail.com

# =================================
# 客户端配置
# =================================
# StarFire 服务器地址
STARFIRE_HOST=http://localhost:8080

# 连接令牌
STARFIRE_TOKEN=your-join-token-here

# 本地推理引擎类型：ollama, openai, all
STARFIRE_ENGINE=openai

# =================================
# Ollama 配置
# =================================
# Ollama API 服务器地址
OLLAMA_HOST=http://localhost:11434

# =================================
# OpenAI API 配置
# =================================
# OpenAI API 密钥
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI API 基础URL（可选，用于代理或自定义端点）
OPENAI_API_BASE=https://api.openai.com/v1

# =================================
# 定价配置（PPM - Price Per Million tokens）
# =================================
# 输入tokens价格（每百万tokens的价格，美元）
STAR_FIRE_INPUT_TOKEN_PRICE_PER_M=4.0

# 输出tokens价格（每百万tokens的价格，美元）
STAR_FIRE_OUTPUT_TOKEN_PRICE_PER_M=8.0

# =================================
# Embedding 模型配置
# =================================
# Embedding 模型输入tokens价格（每百万tokens的价格，美元）
STAR_FIRE_EMBEDDING_INPUT_TOKEN_PRICE_PER_M=0.1

# 是否启用embedding模型支持
ENABLE_EMBEDDING_MODELS=true

# 支持的embedding模型列表（逗号分隔）
SUPPORTED_EMBEDDING_MODELS=text-embedding-ada-002,text-embedding-3-small,text-embedding-3-large,bge-large-zh,bge-base-zh,bge-small-zh,bge-large-en,bge-base-en,bge-small-en,bge-m3

# =================================
# 数据库配置（可选）
# =================================
# 数据库文件路径
DATABASE_PATH=./data/star_fire.db

# =================================
# 日志配置
# =================================
# 日志级别：debug, info, warn, error
LOG_LEVEL=info

# 日志文件路径
LOG_FILE=./logs/starfire.log

# =================================
# 性能优化配置
# =================================
# 最大并发连接数
MAX_CONCURRENT_CONNECTIONS=1000

# 请求超时时间（秒）
REQUEST_TIMEOUT=30

# 响应缓存时间（秒）
RESPONSE_CACHE_TTL=300

# =================================
# 安全配置
# =================================
# 是否启用CORS
ENABLE_CORS=true

# 允许的域名列表（逗号分隔）
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# 是否启用请求限流
ENABLE_RATE_LIMITING=true

# 每分钟最大请求数
MAX_REQUESTS_PER_MINUTE=60

# =================================
# 监控配置
# =================================
# 是否启用指标收集
ENABLE_METRICS=true

# 指标端口
METRICS_PORT=9090

# 健康检查端点
HEALTH_CHECK_PATH=/health

# =================================
# 使用示例
# =================================
#
# 1. 基础配置（最小配置）：
#    SERVER_PORT=:8080
#    JWT_SECRET=your_strong_secret_key_here
#    STARFIRE_HOST=http://localhost:8080
#    STARFIRE_TOKEN=your-token
#    OPENAI_API_KEY=sk-your-key
#
# 2. 生产环境配置：
#    - 设置强JWT密钥
#    - 配置邮件服务
#    - 启用CORS和限流
#    - 设置适当的定价
#
# 3. Embedding模型配置：
#    ENABLE_EMBEDDING_MODELS=true
#    STAR_FIRE_EMBEDDING_INPUT_TOKEN_PRICE_PER_M=0.1
#    SUPPORTED_EMBEDDING_MODELS=text-embedding-ada-002,text-embedding-3-small
#
# 4. 收益计算公式：
#    总收益 = (输入tokens数 × IPPM + 输出tokens数 × OPPM) / 1,000,000
#    Embedding收益 = (输入tokens数 × Embedding IPPM) / 1,000,000
